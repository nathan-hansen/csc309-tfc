-- Image generated by dbdiagram.io

table Account [headercolor: #2D6512] {
  id int [pk]
  username StringField
  first_name StringField
  last_name StringField
  email StringField
  avatar ImageField
  phone_number StringField
}

table Studio [headercolor: #4B82B0] {
  id int [pk]
  name StringField
  address StringField
  latitude FloatField
  longitude FloatField
  postal_code StringField
  phone_number StringField
  // images
}

table StudioImage [headercolor: #4B82B0] {
  studio ForeignKey
  image ImageField
}
Ref: StudioImage.studio > Studio.id

table Amenities [headercolor: #4B82B0] {
  studio ForeignKey
  type StringField
  quantity int
}
Ref: Amenities.studio > Studio.id

table Class [headercolor: #EB801B] {
  id int [pk]
  studio ForeignKey
  name StringField
  description TextField
  coach StringField
  // keywords type could change...
  // assess during implementation
  class_start DateField
  class_end DateField
  class_time TimeField
  duration DurationField
  days_inbetween IntegerField
  spots IntegerField
}
Ref: Class.studio > Studio.id

table Keywords [headercolor: #EB801B] {
  classid ForeignKey
  keyword StringField
}
Ref: Keywords.classid > Class.id

// Use this table if you want to cancel 
// one time in a recursive class
table ClassTimeTable [headercolor: #EB801B] {
  id int [pk]
  classid ForeignKey
  time DateTimeField
  spotleft IntegerField
}
Ref: ClassTimeTable.classid > Class.id

table SubscriptionPlan [headercolor: #79AD51] {
  id int [pk]
  payment DecimalField
  // one of "monthly", "yearly", etc
  // change if more complexity needed
  interval DurationField
}

table CurrentSubscription [headercolor: #126E7A] {
  account ForeignKey
  plan ForeignKey
  expiration DateTimeField
}
Ref: CurrentSubscription.plan - SubscriptionPlan.id

table PaymentInfo [headercolor: #24BAB1] {
  account ForeignKey
  card_number IntegerField
  card_expiry IntegerField
  cvv IntegerField
  name_on_card StringField
}
Ref: PaymentInfo.account - Account.id
Ref: Account.id - CurrentSubscription.account

table PaymentHistory [headercolor: #24BAB1] {
  id int [pk]
  account ForeignKey
  timestamp DateTimeField
  amount DecimalField
  card_number IntegerField
  card_expiry IntegerField
}
Ref: PaymentHistory.account > Account.id

table EnrollClass [headercolor: #DE65C3] {
  account ForeignKey
  classtime ForeignKey
}
Ref: EnrollClass.account > Account.id
Ref: EnrollClass.classtime > ClassTimeTable.id

